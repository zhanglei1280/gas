(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/logo.8ae92b8d.jpg"},37:function(e,t,a){e.exports=a(87)},47:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),s=a.n(c),l=(a(43),a(45),a(47),a(5)),o=a(9),i=a(7),m=a(10),u=function e(t,a){var n=this;Object(l.a)(this,e),this.distance=function(e){var t=e.y-n.y;return Math.acos(Math.sin(n.x)*Math.sin(e.x)+Math.cos(n.y)*Math.cos(e.y)*Math.cos(t))*Math.PI/180*6378.137},this.x=t.toFixed(2),this.y=a.toFixed(2)},d=a(31),f=a.n(d),h=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).render=function(){var e=a.props.children,t=e.source,n=e.dest,c=(e.distance,e.price),s=e.legs;return r.a.createElement("div",{className:"res"},r.a.createElement("div",{className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},t,"\xa0",r.a.createElement("i",{className:"fas fa-chevron-right"}),"\xa0",n),r.a.createElement("a",{href:"#",className:"card-header-icon","aria-label":"more options"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},s.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("nav",{className:"level is-mobile"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item"},r.a.createElement("h1",null,f()(e.departure).format("HH:mm")))),r.a.createElement("div",{className:"level-right"},r.a.createElement("div",{className:"level-item"},r.a.createElement("h1",null,c," \u20ac")))))}))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("a",{href:"#",className:"card-footer-item"},"Reserve your ticket"),r.a.createElement("a",{href:"#",className:"card-footer-item"},"See on map"))))},a}return Object(m.a)(t,e),t}(n.Component),v=function(e){return fetch(function(e){return"https://data.sncf.com/api/records/1.0/search/?dataset=liste-des-gares&q=".concat(e,"&facet=fret&facet=voyageurs&facet=code_ligne&facet=departement")}(e)).then(function(e){return e.json()}).then(function(e){return console.log(e),e&&e.records&&e.records[0]&&e.records[0].fields.coordonnees_geographiques?e.records[0].fields.coordonnees_geographiques:[]})},p=a(90),E=a(18),g=a.n(E),b=(n.Component,a(32)),N=a.n(b),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={source:"",dest:"",results:[],errSource:!1,errDest:!1,time:new Date,loading:!1,distance:0},a.componentDidMount=function(){var e=a.props.location.pathname.split(/ *\/ */),t=e[1],n=e[2];t&&a.setState(function(){return{source:t}}),n&&a.setState(function(){return{dest:n}})},a.onChangeDate=function(e){return a.setState({time:e})},a.onFrom=function(e){var t=e.target.value;a.setState(function(){return{source:t,errSource:!1}})},a.onTo=function(e){var t=e.target.value;a.setState(function(){return{dest:t,errDest:!1}})},a.onCancel=function(e){e.preventDefault(),a.setState(function(){return{source:"",dest:"",errSource:!1,errDest:!1}})},a.onSubmit=function(e){e.preventDefault(),a.setState(function(){return{loading:!0}});var t=a.state,n=t.source,r=t.dest;if(n.length||a.setState(function(){return{errSource:!0}}),r.length){var c=v(n),s=v(r);Promise.all([c,s]).then(function(e){if(2===e[0].length&2===e[1].length){var t=new u(e[0][1],e[0][0]),c=new u(e[1][1],e[1][0]),s=t.distance(c);console.log(t.x,c.x,t.distance(c)),a.setState(function(){return{distance:s}}),a.props.history.push("/".concat(n,"/").concat(r))}else 2!==e[0].length&&a.setState(function(){return{errSource:!0}}),2!==e[1].length&&a.setState(function(){return{errDest:!0}});var l=a.state.time;N.a.post("http://localhost:20191/journey").send({source:n,dest:r,time:l}).end(function(e,t){e?console.log(e):(console.log(t.body),a.setState(function(){return{results:t.body}})),a.setState(function(){return{loading:!1}})})}).catch(function(e){console.log(e)})}else a.setState(function(){return{errDest:!0}})},a.render=function(){return r.a.createElement("div",{className:"fyt"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"From"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:a.state.errSource?"input is-danger":"input",type:"text",placeholder:"from",value:a.state.source,onChange:a.onFrom}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-map-marker-alt"})),a.state.errSource?r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})):"")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"To"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:a.state.errDest?"input is-danger":"input",type:"text",placeholder:"to",value:a.state.dest,onChange:a.onTo}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-map-marker-alt"})),a.state.errDest?r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})):"")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"picker"},r.a.createElement(g.a,{onChange:a.onChangeDate,value:a.state.time}))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:a.state.loading?"button is-link is-loading":"button is-link",onClick:a.state.loading?function(e){e.preventDefault()}:a.onSubmit,disabled:a.state.loading},"Submit")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-text",onClick:a.onCancel},"Cancel"))),r.a.createElement("div",null,a.state.distance>0?"Distance : ".concat(a.state.distance):""),r.a.createElement("div",null,a.state.results&&!!a.state.results.length&&a.state.results.map(function(e,t){var n=a.state,c=n.source,s=n.dest,l=n.distance;return r.a.createElement(h,{key:t},{source:c,dest:s,distance:l,price:e.price.amount,legs:e.legs})})))},a}return Object(m.a)(t,e),t}(n.Component),y=Object(p.a)(S),w=a(89),x=a(88),j=function(){return r.a.createElement(y,null)},D=function(){return r.a.createElement(w.a,null,r.a.createElement("div",null,r.a.createElement(x.a,{path:"/",component:j})))},k=a(35),C=a.n(k),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",href:"#"},r.a.createElement("img",{src:C.a,width:"112",height:"28"})),r.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement("a",{className:"navbar-item"},"Home")))))},a}return Object(m.a)(t,e),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(D,null));s.a.render(M,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,2,1]]]);
//# sourceMappingURL=main.bfd23cb4.chunk.js.map